

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; tml v0.2.3 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="tml v0.2.3 documentation" href="index.html" />
    <link rel="next" title="Items" href="items.html" />
    <link rel="prev" title="Welcome to TeeworldsMapLib’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="items.html" title="Items"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to TeeworldsMapLib’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">tml v0.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>Welcome! This tutorial will help you using this library to read and create
teeworlds maps.</p>
<div class="section" id="load-and-reading-a-map">
<h2>Load and reading a map<a class="headerlink" href="#load-and-reading-a-map" title="Permalink to this headline">¶</a></h2>
<div class="section" id="loading">
<h3>Loading<a class="headerlink" href="#loading" title="Permalink to this headline">¶</a></h3>
<p>To load a teeworlds map, simply pass the path (with or without the <tt class="docutils literal"><span class="pre">.map</span></tt>
extension) to the Teemap class. Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tml.tml</span> <span class="kn">import</span> <span class="n">Teemap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Teemap</span><span class="p">(</span><span class="s">&#39;dm1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Teemap</span><span class="p">(</span><span class="s">&#39;dm1.map&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reading">
<h3>Reading<a class="headerlink" href="#reading" title="Permalink to this headline">¶</a></h3>
<p>The structure of the teemap is similiar to the structure you know from the
teeworlds editor, it should be familiar to you.
Example: Getting a list of tiles and their index.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Teemap</span><span class="p">(</span><span class="s">&#39;dm1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tiles</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">group</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tiles</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tiles</span>
<span class="go">&lt;TileManager (3000)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tiles</span><span class="p">[</span><span class="mi">90</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="go">24</span>
</pre></div>
</div>
<p>Check out the page &#8220;<a class="reference internal" href="example.html#examples"><em>Example scripts</em></a>&#8221; for some impressions what is possible.
For a full list of all methods and attributes, check <a class="reference internal" href="teemap.html#tml.tml.Teemap" title="tml.tml.Teemap"><tt class="xref py py-class docutils literal"><span class="pre">tml.tml.Teemap</span></tt></a></p>
</div>
</div>
<div class="section" id="modifying-creating-a-map-from-scratch">
<h2>Modifying &amp; creating a map from scratch<a class="headerlink" href="#modifying-creating-a-map-from-scratch" title="Permalink to this headline">¶</a></h2>
<p>A new Teemap objekt does not contain any layers or groups. To create a
minimalistic, but valid teeworlds map, you need to add one group and a
gamelayer.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tml.tml</span> <span class="kn">import</span> <span class="n">Teemap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tml.items</span> <span class="kn">import</span> <span class="n">Group</span><span class="p">,</span> <span class="n">TileLayer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Teemap</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">groups</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Group</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">layers</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">game</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">layers</span>
<span class="go">[&lt;Game layer (50x50)&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">groups</span>
<span class="go">[&lt;Group (1)&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;hello map&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that a gamelayer is just a tilelayer with a special <tt class="docutils literal"><span class="pre">game</span> <span class="pre">flag</span></tt></p>
<p>You can at any time call the <a class="reference internal" href="teemap.html#tml.tml.Teemap.validate" title="tml.tml.Teemap.validate"><tt class="xref py py-meth docutils literal"><span class="pre">validate</span></tt></a>
method, which will return <tt class="xref docutils literal"><span class="pre">True</span></tt> if your map is ready to be saved, or raise
an error with information what is wrong with your map.</p>
<div class="section" id="managers">
<h3>Managers<a class="headerlink" href="#managers" title="Permalink to this headline">¶</a></h3>
<p>For an efficiently memory usage, we do not save the <a class="reference internal" href="items.html#tml.items.Tile" title="tml.items.Tile"><tt class="xref py py-class docutils literal"><span class="pre">Tile</span></tt></a> and <a class="reference internal" href="items.html#tml.items.Quad" title="tml.items.Quad"><tt class="xref py py-class docutils literal"><span class="pre">Quad</span></tt></a> objects in simple lists.
There is a huge number of tiles and quads in a average map, saving them as
Tile and Quad objects will eat up your ram. For this reason, we save them as
plain strings. A single tile may look like this:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">\x01\x00\x00\x00</span></tt></div></blockquote>
<p>The quads, too, just a bit longer. Nevertheless, we want you to provide a
simple interface, and not give you those ugly strings. This is why we invented
the <tt class="xref py py-class docutils literal"><span class="pre">Quad-</span> <span class="pre">&lt;tml.items.QuadManager</span></tt> and <tt class="xref py py-class docutils literal"><span class="pre">TileManager</span>
<span class="pre">&lt;tml.items.TileManager</span></tt>. You can access the tiles through the manager like a
normal list, and the manager will generate a Tile or Quad object for you on the
fly. But keep in mind, that the generate object is <strong>only a copy</strong> of the
string representation of the tile or quad! That means, that you need to
explicity assign the tile, if you changed it! This will NOT work:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="s">&#39;l&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Instead, do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tile</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tile</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="s">&#39;l&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="n">tile</span>
</pre></div>
</div>
</div>
<div class="section" id="selecting-a-subset-of-a-tilelayer">
<h3>Selecting a subset of a tilelayer<a class="headerlink" href="#selecting-a-subset-of-a-tilelayer" title="Permalink to this headline">¶</a></h3>
<p>You can cut out an rectangle of a layer and get a new layer. Use <a class="reference internal" href="items.html#tml.items.TileLayer.select" title="tml.items.TileLayer.select"><tt class="xref py py-meth docutils literal"><span class="pre">select</span></tt></a> for that purpose. If you try to select over the
edges of the layer, your values will just be clamped.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">gamelayer</span>
<span class="go">&lt;Game layer (60x50)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">gamelayer</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&lt;Game layer (5x10)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">gamelayer</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">42</span><span class="p">)</span>
<span class="go">&lt;Game layer (20x42)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">gamelayer</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&lt;Game layer (10x5)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">gamelayer</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&lt;Game layer (1x5)&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="drawing-on-a-tilelayer">
<h3>Drawing on a tilelayer<a class="headerlink" href="#drawing-on-a-tilelayer" title="Permalink to this headline">¶</a></h3>
<p>Like with the brush in teeworlds, you can draw one tilelayer (the one on the
brush) onto another. Call the draw method of the layer which should get the
tiles from the other one, and give it the x and y coordinates.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">destination_layer</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">source_layer</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="resizing-a-tilelayer">
<h3>Resizing a tilelayer<a class="headerlink" href="#resizing-a-tilelayer" title="Permalink to this headline">¶</a></h3>
<p>Maybe you want to change the size of a tilelayer. Don&#8217;t worry about adding or
removing tiles from the tilemanager - just set the new width and height of the
layer:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">200</span>
</pre></div>
</div>
<p>Internally, the number of tiles in the tilemanager will be changed to fit to
the new size. This is why you should <em>never</em> try to add or remove objects
manually from a manager, the layer handles it itself!</p>
</div>
</div>
<div class="section" id="saving-a-map">
<h2>Saving a map<a class="headerlink" href="#saving-a-map" title="Permalink to this headline">¶</a></h2>
<p>Saving a map to a file is just as easy as reading it. Just call the
<a class="reference internal" href="teemap.html#tml.tml.Teemap.save" title="tml.tml.Teemap.save"><tt class="xref py py-meth docutils literal"><span class="pre">save</span></tt></a> method and give it the path where it
should save the file. You can, but do not need to leave ot the <tt class="docutils literal"><span class="pre">.map</span></tt>
fileextension, it will be added automatically.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">teemap</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;/home/tee/my_great_map&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#load-and-reading-a-map">Load and reading a map</a><ul>
<li><a class="reference internal" href="#loading">Loading</a></li>
<li><a class="reference internal" href="#reading">Reading</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modifying-creating-a-map-from-scratch">Modifying &amp; creating a map from scratch</a><ul>
<li><a class="reference internal" href="#managers">Managers</a></li>
<li><a class="reference internal" href="#selecting-a-subset-of-a-tilelayer">Selecting a subset of a tilelayer</a></li>
<li><a class="reference internal" href="#drawing-on-a-tilelayer">Drawing on a tilelayer</a></li>
<li><a class="reference internal" href="#resizing-a-tilelayer">Resizing a tilelayer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#saving-a-map">Saving a map</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to TeeworldsMapLib&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="items.html"
                        title="next chapter">Items</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="items.html" title="Items"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to TeeworldsMapLib’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">tml v0.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010-2012, TML Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>